clear F
fs          = filesep;
F.base      = '/Users/roschkoenig/Dropbox/Research/1909 CB Dispatch Sims';
F.scripts   = [F.base fs 'Network Sims'];

load([F.base fs 'Sims.mat']); 

%% State space plot
%--------------------------------------------------------------------------
B = C{1};
for b = 1:length(B)
    xl = size(B(b).x,1); xr = fix(xl/2):xl; 
    plot(B(b).x(xr,1), B(b).x(xr,2)), hold on
end

%% Plot representations of bifurcations
%==========================================================================
do3d = 1;
cols = flip(cbrewer('div', 'Spectral', length(C{c}))); 

for c = 1:2, figure(c), 
for d = 1:2, subplot(2,1,d)
for b = 1:length(C{c})
    
% 2D Bifurcation plot
%--------------------------------------------------------------------------
if 
xl = size(C{c}(b,1).x,1); xr = fix(xl/2):xl; 
if d == 1,  bvals = ones(length(xr),1)*b;
else,       bvals = ones(length(xr),1) * (length(C{c})-b+1);   
end

xe = C{c}(b,d).x(xr,10);
xi = C{c}(b,d).x(xr,11);
    scatter(bvals(1), log(max(xe)), 'filled', 'k'), hold on
    scatter(bvals(1), log(min(xe)), 'filled', 'k')
    ylim([-3.5 0.5]); 

% 3D Bifurcation plot
%--------------------------------------------------------------------------
plot3(bvals, xe, xi, 'color', cols(b,:)); hold on
ylim([0 0.75]);
grid on
end
end
end